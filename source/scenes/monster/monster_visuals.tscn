[gd_scene format=3 uid="uid://jbyy44t3pgqv"]

[ext_resource type="PackedScene" uid="uid://csloksb3becbr" path="res://assets/models/monster.blend" id="1_ijglf"]
[ext_resource type="Shader" uid="uid://dcxcwwd03jc52" path="res://assets/shaders/dither.gdshader" id="2_timmr"]
[ext_resource type="Texture2D" uid="uid://b8aoyiggyrp7o" path="res://assets/textures/monster/eyes.png" id="3_ghe6x"]
[ext_resource type="Material" uid="uid://dgoqmgjd8po8g" path="res://assets/materials/monster.tres" id="4_5ol2o"]
[ext_resource type="Script" uid="uid://cfwy2ymlhqgnw" path="res://scripts/tools/start_ik.gd" id="4_ghe6x"]
[ext_resource type="Script" uid="uid://i22msennjewd" path="res://scripts/tools/step_target.gd" id="5_1fxpq"]
[ext_resource type="Script" uid="uid://brhk3pvxn24uw" path="res://scripts/tools/ik_target.gd" id="5_cxi1e"]
[ext_resource type="Script" uid="uid://dtffktrhggpkf" path="res://scripts/tools/step_targets.gd" id="6_2yaav"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_1fxpq"]
render_priority = 1
shader = ExtResource("2_timmr")
shader_parameter/texture_albedo = ExtResource("3_ghe6x")
shader_parameter/lit_color = Color(1, 1, 1, 1)
shader_parameter/normal_mapping = 0
shader_parameter/normal_uv_scale = Vector2(1, 1)
shader_parameter/normal_uv_offset = Vector2(0, 0)
shader_parameter/normal_scale = 1.0
shader_parameter/shadow_color = Color(1, 1, 1, 1)
shader_parameter/use_gradient = false
shader_parameter/use_inverse_gradient = false
shader_parameter/color_depth = 16.0000007125
shader_parameter/roughness_scale = 1.0
shader_parameter/use_transparency = true
shader_parameter/alpha_threshold = 0.5
shader_parameter/cull_mode = 0
shader_parameter/use_dithered_transparency = false
shader_parameter/opacity = 1.0
shader_parameter/billboard_mode = 0
shader_parameter/no_outlines = false
shader_parameter/dither_type = 0
shader_parameter/dither_mode = 0
shader_parameter/dither_pixel_size = 2.0000000475
shader_parameter/dither_density = 256.0
shader_parameter/world_dither_density = 32.0
shader_parameter/dither_spread = 2.0
shader_parameter/shadow_bias = 0.1320000537699999
shader_parameter/albedo_mapping = 0
shader_parameter/uv_scale = Vector2(1, 1)
shader_parameter/uv_offset = Vector2(0, 0)
shader_parameter/global_ambient = Color(0, 0.014809188, 0.015851432, 1)
shader_parameter/light_boost = 1.0
shader_parameter/bounce_strength = 0.0

[node name="monster" unique_id=660503573 instance=ExtResource("1_ijglf")]

[node name="eyes" type="Sprite3D" parent="." index="0" unique_id=1949033890]
transform = Transform3D(1, -1.0727715e-14, 0, 1.0727715e-14, 1, 0, 0, 0, 1, 0, 0.067, 0.40048385)
sorting_offset = 1.0
material_override = SubResource("ShaderMaterial_1fxpq")
texture = ExtResource("3_ghe6x")

[node name="Skeleton3D" parent="Armature" parent_id_path=PackedInt32Array(761020580) index="0" unique_id=1824726652]
modifier_callback_mode_process = 0

[node name="Cube" parent="Armature/Skeleton3D/head" parent_id_path=PackedInt32Array(379736106) index="0" unique_id=245814248]
material_override = ExtResource("4_5ol2o")

[node name="Cube_017" parent="Armature/Skeleton3D/neck" parent_id_path=PackedInt32Array(346553842) index="0" unique_id=634084893]
material_override = ExtResource("4_5ol2o")

[node name="Cube_013" parent="Armature/Skeleton3D/l_hand" parent_id_path=PackedInt32Array(1925841840) index="0" unique_id=978076543]
material_override = ExtResource("4_5ol2o")

[node name="Cube_012" parent="Armature/Skeleton3D/l_forearm" parent_id_path=PackedInt32Array(1328960560) index="0" unique_id=369141377]
material_override = ExtResource("4_5ol2o")

[node name="Cube_010" parent="Armature/Skeleton3D/l_arm" parent_id_path=PackedInt32Array(2038679607) index="0" unique_id=1628983609]
material_override = ExtResource("4_5ol2o")

[node name="Cube_011" parent="Armature/Skeleton3D/l_arm" parent_id_path=PackedInt32Array(2038679607) index="1" unique_id=846272778]
material_override = ExtResource("4_5ol2o")

[node name="Cube_006" parent="Armature/Skeleton3D/r_hand" parent_id_path=PackedInt32Array(1326891952) index="0" unique_id=817445796]
material_override = ExtResource("4_5ol2o")

[node name="Cube_005" parent="Armature/Skeleton3D/r_forearm" parent_id_path=PackedInt32Array(1626055945) index="0" unique_id=1884154263]
material_override = ExtResource("4_5ol2o")

[node name="Cube_003" parent="Armature/Skeleton3D/r_arm" parent_id_path=PackedInt32Array(1575093946) index="0" unique_id=282440115]
material_override = ExtResource("4_5ol2o")

[node name="Cube_004" parent="Armature/Skeleton3D/r_arm" parent_id_path=PackedInt32Array(1575093946) index="1" unique_id=611567622]
material_override = ExtResource("4_5ol2o")

[node name="Cube_001" parent="Armature/Skeleton3D/spine" parent_id_path=PackedInt32Array(1948850707) index="0" unique_id=1102076790]
material_override = ExtResource("4_5ol2o")

[node name="Cube_016" parent="Armature/Skeleton3D/l_foot" parent_id_path=PackedInt32Array(1357696880) index="0" unique_id=1164450296]
material_override = ExtResource("4_5ol2o")

[node name="Cube_015" parent="Armature/Skeleton3D/l_calf" parent_id_path=PackedInt32Array(2110775919) index="0" unique_id=1471849492]
material_override = ExtResource("4_5ol2o")

[node name="Cube_014" parent="Armature/Skeleton3D/l_leg" parent_id_path=PackedInt32Array(398573463) index="0" unique_id=2086852884]
material_override = ExtResource("4_5ol2o")

[node name="Cube_009" parent="Armature/Skeleton3D/r_foot" parent_id_path=PackedInt32Array(1545686329) index="0" unique_id=917894802]
material_override = ExtResource("4_5ol2o")

[node name="Cube_008" parent="Armature/Skeleton3D/r_calf" parent_id_path=PackedInt32Array(948173683) index="0" unique_id=1175264270]
material_override = ExtResource("4_5ol2o")

[node name="Cube_007" parent="Armature/Skeleton3D/r_leg" parent_id_path=PackedInt32Array(609327675) index="0" unique_id=423582900]
material_override = ExtResource("4_5ol2o")

[node name="right_arm" type="SkeletonIK3D" parent="Armature/Skeleton3D" index="15" unique_id=1563739400]
root_bone = &"r_arm"
tip_bone = &"r_arm_tip"
target_node = NodePath("../../r_arm_target")
script = ExtResource("4_ghe6x")

[node name="left_arm" type="SkeletonIK3D" parent="Armature/Skeleton3D" index="16" unique_id=88774442]
root_bone = &"l_arm"
tip_bone = &"l_arm_tip"
target_node = NodePath("../../l_arm_target")
script = ExtResource("4_ghe6x")

[node name="right_leg" type="SkeletonIK3D" parent="Armature/Skeleton3D" index="17" unique_id=267079054]
root_bone = &"r_leg"
tip_bone = &"r_leg_tip"
target_node = NodePath("../../r_leg_target")
script = ExtResource("4_ghe6x")

[node name="left_leg" type="SkeletonIK3D" parent="Armature/Skeleton3D" index="18" unique_id=1196829886]
root_bone = &"l_leg"
tip_bone = &"l_leg_tip"
target_node = NodePath("../../l_leg_target")
script = ExtResource("4_ghe6x")

[node name="Cube_002" parent="Armature/Skeleton3D/root" parent_id_path=PackedInt32Array(1113093590) index="0" unique_id=314961394]
material_override = ExtResource("4_5ol2o")

[node name="step_targets" type="Node3D" parent="Armature" parent_id_path=PackedInt32Array(761020580) index="1" unique_id=2117783646]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.04552692, -0.5008917, 0.40757138)
script = ExtResource("6_2yaav")
offset = 20.0

[node name="r_arm_step_target" type="Node3D" parent="Armature/step_targets" index="0" unique_id=1917531191]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.92890906, 0.3645854, 1.2445128)
script = ExtResource("5_1fxpq")

[node name="RayCast3D" type="RayCast3D" parent="Armature/step_targets/r_arm_step_target" index="0" unique_id=182663811]
transform = Transform3D(0.9903999, 0.13400887, -0.033906844, -0.12878218, 0.98364115, 0.12595657, 0.050231475, -0.12038077, 0.99145615, 0, 0.35659504, 0)
target_position = Vector3(0, -5, 0)
collision_mask = 2
hit_from_inside = true

[node name="Marker3D" type="Marker3D" parent="Armature/step_targets/r_arm_step_target" index="1" unique_id=1525039937]
gizmo_extents = 0.78

[node name="l_arm_step_target" type="Node3D" parent="Armature/step_targets" index="1" unique_id=1263795975]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.063676, 0.27829218, 1.245)
script = ExtResource("5_1fxpq")

[node name="RayCast3D" type="RayCast3D" parent="Armature/step_targets/l_arm_step_target" index="0" unique_id=1686285805]
transform = Transform3D(0.99924475, -0.013436785, 0.03646388, 0.002684652, 0.9599474, 0.28016734, -0.03876796, -0.27985778, 0.9592584, 0, 0.35659504, 0)
target_position = Vector3(0, -5, 0)
collision_mask = 2
hit_from_inside = true

[node name="Marker3D" type="Marker3D" parent="Armature/step_targets/l_arm_step_target" index="1" unique_id=918073955]
gizmo_extents = 0.78

[node name="r_leg_step_target" type="Node3D" parent="Armature/step_targets" index="2" unique_id=1296562492]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.580046, 0.27204728, -1.8771847)
script = ExtResource("5_1fxpq")

[node name="RayCast3D" type="RayCast3D" parent="Armature/step_targets/r_leg_step_target" index="0" unique_id=1083423952]
transform = Transform3D(0.98313534, 0.17816286, -0.041266788, -0.18188442, 0.97607553, -0.1191416, 0.019052915, 0.1246381, 0.9920193, 0, 0.35659504, 0)
target_position = Vector3(0, -5, 0)
collision_mask = 2
hit_from_inside = true

[node name="Marker3D" type="Marker3D" parent="Armature/step_targets/r_leg_step_target" index="1" unique_id=781255647]
gizmo_extents = 0.78

[node name="l_leg_step_target" type="Node3D" parent="Armature/step_targets" index="3" unique_id=1182614964]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.0289512, 0.4093591, -1.7995806)
script = ExtResource("5_1fxpq")

[node name="RayCast3D" type="RayCast3D" parent="Armature/step_targets/l_leg_step_target" index="0" unique_id=1977958791]
transform = Transform3D(0.93586755, -0.34592345, 0.06699889, 0.3480817, 0.9371717, -0.023413526, -0.054690175, 0.045233052, 0.9974783, 0, 0.35659504, 0)
target_position = Vector3(0, -5, 0)
collision_mask = 2
hit_from_inside = true

[node name="Marker3D" type="Marker3D" parent="Armature/step_targets/l_leg_step_target" index="1" unique_id=1257232960]
gizmo_extents = 0.78

[node name="r_arm_target" type="Node3D" parent="Armature" parent_id_path=PackedInt32Array(761020580) index="2" unique_id=1470774718 node_paths=PackedStringArray("step_target", "adjacent_leg", "opposite_leg")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.974436, -0.12632191, 1.6520841)
script = ExtResource("5_cxi1e")
step_target = NodePath("../step_targets/r_arm_step_target")
step_distance = 1.0
adjacent_leg = NodePath("../l_arm_target")
opposite_leg = NodePath("../l_leg_target")

[node name="l_arm_target" type="Node3D" parent="Armature" parent_id_path=PackedInt32Array(761020580) index="3" unique_id=1749603167 node_paths=PackedStringArray("step_target", "adjacent_leg", "opposite_leg")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.0181491, -0.36921626, 1.6525714)
script = ExtResource("5_cxi1e")
step_target = NodePath("../step_targets/l_arm_step_target")
step_distance = 1.0
adjacent_leg = NodePath("../r_arm_target")
opposite_leg = NodePath("../r_leg_target")

[node name="r_leg_target" type="Node3D" parent="Armature" parent_id_path=PackedInt32Array(761020580) index="4" unique_id=253089859 node_paths=PackedStringArray("step_target", "adjacent_leg", "opposite_leg")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.6255729, -0.3754611, -1.4696133)
script = ExtResource("5_cxi1e")
step_target = NodePath("../step_targets/r_leg_step_target")
step_distance = 1.0
adjacent_leg = NodePath("../l_leg_target")
opposite_leg = NodePath("../l_arm_target")

[node name="l_leg_target" type="Node3D" parent="Armature" parent_id_path=PackedInt32Array(761020580) index="5" unique_id=707524935 node_paths=PackedStringArray("step_target", "adjacent_leg", "opposite_leg")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.9834242, -0.081548214, -1.3920093)
script = ExtResource("5_cxi1e")
step_target = NodePath("../step_targets/l_leg_step_target")
step_distance = 1.0
adjacent_leg = NodePath("../r_leg_target")
opposite_leg = NodePath("../r_arm_target")
