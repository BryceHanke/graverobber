[gd_scene format=3 uid="uid://b8topm6ndl17v"]

[ext_resource type="PackedScene" uid="uid://bvvs8e2wk35vx" path="res://scenes/catacombs/catacombs.tscn" id="1_8thrb"]
[ext_resource type="Script" uid="uid://buw32d3844l06" path="res://scripts/levels/catacombs_level.gd" id="1_54ht4"]
[ext_resource type="PackedScene" uid="uid://cxk27w5ficlco" path="res://scenes/player/player.tscn" id="2_w60cf"]
[ext_resource type="Script" uid="uid://1xbyyhgroi2r" path="res://scripts/misc/light_flicker.gd" id="6_7cme6"]
[ext_resource type="AudioStream" uid="uid://bspf1mkw7rsbx" path="res://assets/sounds/mhm.mp3" id="7_pho0m"]
[ext_resource type="Script" uid="uid://blesegkbsfser" path="res://scripts/triggers/scream.gd" id="8_7cme6"]
[ext_resource type="AudioStream" uid="uid://duusr86tgxjs5" path="res://assets/sounds/ambience.wav" id="8_kamq3"]
[ext_resource type="PackedScene" uid="uid://04m2i41b26xa" path="res://monster/monster.tscn" id="9_7cme6"]
[ext_resource type="AudioStream" uid="uid://hob3eo673lhj" path="res://assets/sounds/low_quality_scream.mp3" id="9_kamq3"]

[sub_resource type="BoxShape3D" id="BoxShape3D_ao5yu"]

[node name="catacombs" type="Node3D" unique_id=290181263]
script = ExtResource("1_54ht4")

[node name="music" type="AudioStreamPlayer" parent="." unique_id=1580155449]
stream = ExtResource("7_pho0m")
volume_db = -40.0
pitch_scale = 0.85
autoplay = true
mix_target = 1
bus = &"music"

[node name="ambience" type="AudioStreamPlayer" parent="." unique_id=2003621618]
stream = ExtResource("8_kamq3")
volume_db = -20.0
pitch_scale = 0.85
autoplay = true
mix_target = 1
bus = &"ambience"

[node name="player" parent="." unique_id=1570651658 instance=ExtResource("2_w60cf")]

[node name="camera" parent="player/head/lean/pivot" parent_id_path=PackedInt32Array(1570651658, 888106981) index="0" unique_id=1055946145]
current = true

[node name="pixelate" parent="player/head/lean/pivot/camera" index="0" unique_id=93580127]
visible = false

[node name="OmniLight3D" type="OmniLight3D" parent="player/head/lean/pivot/camera" index="1" unique_id=1260396475]
layers = 3
light_energy = 1.6188202
shadow_enabled = true
shadow_blur = 6.54705
omni_attenuation = 2.0
script = ExtResource("6_7cme6")
probability = 50
min_brightness = 0.0
max_brightness = 3.0
max_blur = 10.0

[node name="steps" parent="player" index="5" unique_id=59331114]
max_polyphony = 3

[node name="Timer" parent="player/steps" index="0" unique_id=458050395]
autostart = true

[node name="camera" parent="player/SubViewportContainer/hand_view" parent_id_path=PackedInt32Array(1570651658, 476380750) index="0" unique_id=1232050989]
current = true

[node name="OmniLight3D" parent="player/SubViewportContainer/hand_view/sway/holder/torch/torch" parent_id_path=PackedInt32Array(1570651658, 1836886530) index="4" unique_id=592766888]
light_energy = 2.767571
shadow_blur = 1.6070285

[node name="Sprite3D2" parent="player/SubViewportContainer/hand_view/sway/holder/torch/torch/OmniLight3D" index="0" unique_id=1329841238]
transform = Transform3D(-0.7287186, 0, -0.6848133, 0, 1, 0, 0.6848133, 0, -0.7287186, 0, 0.0012581348, 0.00080662966)
frame = 0

[node name="Sprite3D3" parent="player/SubViewportContainer/hand_view/sway/holder/torch/torch/OmniLight3D" index="1" unique_id=1148831848]
transform = Transform3D(-0.9522775, 0, -0.30522424, 0, 0.5164572, 0, 0.30522424, 0, -0.9522775, 1.1920929e-07, -0.1173017, 0.00080662966)
frame = 0

[node name="Sprite3D4" parent="player/SubViewportContainer/hand_view/sway/holder/torch/torch/OmniLight3D" index="2" unique_id=1923378448]
transform = Transform3D(-0.20841111, 0, 0.9780389, 0, 0.51436794, 0, -0.9780389, 0, -0.20841111, 0, -0.11230183, 0.00080662966)
frame = 0

[node name="chalk" parent="player/SubViewportContainer/hand_view/sway/holder" parent_id_path=PackedInt32Array(1570651658, 567501717) index="1" unique_id=1123505354 node_paths=PackedStringArray("player")]
player = NodePath("../../../../..")

[node name="Area3D" type="Area3D" parent="." unique_id=335482119]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.10440302, -2.7429214, -9.901158)
script = ExtResource("8_7cme6")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Area3D" unique_id=316813463]
shape = SubResource("BoxShape3D_ao5yu")

[node name="scream 1" type="AudioStreamPlayer3D" parent="Area3D" unique_id=1699368572]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.310372, -1.7560992, -14.070182)
stream = ExtResource("9_kamq3")
attenuation_model = 2
volume_db = 5.0
max_db = 5.0
bus = &"screams"

[node name="catacombs" parent="." unique_id=396458305 instance=ExtResource("1_8thrb")]

[node name="monster" parent="." unique_id=1254357075 node_paths=PackedStringArray("player") instance=ExtResource("9_7cme6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 22.489014, 0.61533916, -11.041995)
player = NodePath("../player")

[connection signal="body_entered" from="Area3D" to="Area3D" method="_on_body_entered"]

[editable path="player"]
[editable path="player/SubViewportContainer/hand_view/sway/holder/torch/torch"]
[editable path="player/SubViewportContainer/hand_view/sway/holder/chalk"]
[editable path="player/SubViewportContainer/hand_view/sway/holder/chalk/chalk"]
[editable path="monster"]
