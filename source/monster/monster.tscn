[gd_scene format=3 uid="uid://04m2i41b26xa"]

[ext_resource type="Script" uid="uid://c6yvnpxqt6x2u" path="res://monster/scripts/monster.gd" id="1_0ix62"]
[ext_resource type="Script" uid="uid://dlyn7myxb1v18" path="res://scripts/statemachine/statemachine.gd" id="1_jlss8"]
[ext_resource type="Script" uid="uid://buh1dyxd4gil8" path="res://monster/scripts/wander.gd" id="2_gdl1p"]
[ext_resource type="AudioStream" uid="uid://7m2mctf82f43" path="res://monster/sounds/thud_3.mp3" id="2_gp4s5"]
[ext_resource type="Script" uid="uid://gd3kygbrdkps" path="res://monster/scripts/search.gd" id="3_0xprk"]
[ext_resource type="AudioStream" uid="uid://ck0s5sftvqvug" path="res://monster/sounds/thud_1.mp3" id="3_gdl1p"]
[ext_resource type="AudioStream" uid="uid://cme26q6qadno" path="res://monster/sounds/thud_2.mp3" id="4_v8ewj"]
[ext_resource type="AudioStream" uid="uid://kd5wpahptd7w" path="res://monster/sounds/growl_1.mp3" id="6_0iwja"]
[ext_resource type="AudioStream" uid="uid://cyrd1qxasq04b" path="res://monster/sounds/purr_1.mp3" id="6_fttm7"]
[ext_resource type="AudioStream" uid="uid://s1lcukk3380k" path="res://monster/sounds/purr_2.mp3" id="7_akk5r"]
[ext_resource type="AudioStream" uid="uid://bm3g4fgr21kq" path="res://monster/sounds/growl_2.mp3" id="7_opw4d"]
[ext_resource type="AudioStream" uid="uid://b6hv8h12hswr" path="res://monster/sounds/purr_3.mp3" id="8_x2c6u"]
[ext_resource type="AudioStream" uid="uid://d28upwcdhw36v" path="res://monster/sounds/growl_3.mp3" id="8_ydrmy"]
[ext_resource type="AudioStream" uid="uid://dh2onnnkei140" path="res://monster/sounds/purr_4.mp3" id="9_ei7v0"]
[ext_resource type="AudioStream" uid="uid://bxfiahie52is2" path="res://monster/sounds/growl_4.mp3" id="9_s0vn4"]
[ext_resource type="AudioStream" uid="uid://dn5gevefr7gyj" path="res://monster/sounds/growl_5.mp3" id="10_c1jio"]
[ext_resource type="AudioStream" uid="uid://enwx3i4g57fu" path="res://monster/sounds/growl_6.mp3" id="11_nmppe"]
[ext_resource type="AudioStream" uid="uid://de6egqhtnbhxr" path="res://monster/sounds/growl_7.mp3" id="12_84d41"]
[ext_resource type="AudioStream" uid="uid://dfw0osg6bqpoh" path="res://monster/sounds/growl_8.mp3" id="13_nesoo"]
[ext_resource type="AudioStream" uid="uid://cwsggnewaiuxy" path="res://monster/sounds/growl_9.mp3" id="14_dqnb0"]
[ext_resource type="AudioStream" uid="uid://b6gigl0ccits0" path="res://monster/sounds/growl_10.mp3" id="15_vivac"]
[ext_resource type="AudioStream" uid="uid://gkn3oovpmlix" path="res://monster/sounds/breathing.mp3" id="20_opw4d"]
[ext_resource type="AudioStream" uid="uid://ddh6fsuveww0" path="res://monster/sounds/groan_1.mp3" id="21_6h0bv"]
[ext_resource type="Shader" uid="uid://dcxcwwd03jc52" path="res://assets/shaders/dither.gdshader" id="21_s0vn4"]
[ext_resource type="AudioStream" uid="uid://cbvu03qhqhkhx" path="res://monster/sounds/groan_2.mp3" id="22_0xprk"]
[ext_resource type="Texture2D" uid="uid://b8aoyiggyrp7o" path="res://monster/textures/eyes.png" id="22_c1jio"]
[ext_resource type="AudioStream" uid="uid://c3iss0ih36qw6" path="res://monster/sounds/groan_3.mp3" id="23_0ix62"]
[ext_resource type="AudioStream" uid="uid://baxhgylquy6wk" path="res://monster/sounds/groan_4.mp3" id="24_8luhx"]
[ext_resource type="AudioStream" uid="uid://bco4u4ji4pxsh" path="res://monster/sounds/groan_5.mp3" id="25_xt71w"]
[ext_resource type="AudioStream" uid="uid://cgbn16af6nhnq" path="res://monster/sounds/groan_6.mp3" id="26_ok33r"]
[ext_resource type="AudioStream" uid="uid://bgvgjjnfaesjj" path="res://monster/sounds/groan_7.mp3" id="27_hejqc"]
[ext_resource type="AudioStream" uid="uid://cne2ieyn5vgjw" path="res://monster/sounds/groan_8.mp3" id="30_8luhx"]

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_yce20"]
random_pitch = 1.0594631
random_volume_offset_db = 1.0
streams_count = 3
stream_0/stream = ExtResource("2_gp4s5")
stream_1/stream = ExtResource("3_gdl1p")
stream_2/stream = ExtResource("4_v8ewj")

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_6h0bv"]
random_pitch = 1.0594631
random_volume_offset_db = 1.0
streams_count = 10
stream_0/stream = ExtResource("6_0iwja")
stream_1/stream = ExtResource("7_opw4d")
stream_2/stream = ExtResource("8_ydrmy")
stream_3/stream = ExtResource("9_s0vn4")
stream_4/stream = ExtResource("10_c1jio")
stream_5/stream = ExtResource("11_nmppe")
stream_6/stream = ExtResource("12_84d41")
stream_7/stream = ExtResource("13_nesoo")
stream_8/stream = ExtResource("14_dqnb0")
stream_9/stream = ExtResource("15_vivac")

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_1v1i4"]
random_pitch = 1.0594631
random_volume_offset_db = 1.0
streams_count = 4
stream_0/stream = ExtResource("6_fttm7")
stream_1/stream = ExtResource("7_akk5r")
stream_2/stream = ExtResource("8_x2c6u")
stream_3/stream = ExtResource("9_ei7v0")

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_tk6rn"]
random_pitch = 1.3348398
random_volume_offset_db = 5.0
streams_count = 8
stream_0/stream = ExtResource("21_6h0bv")
stream_1/stream = ExtResource("22_0xprk")
stream_2/stream = ExtResource("23_0ix62")
stream_3/stream = ExtResource("24_8luhx")
stream_4/stream = ExtResource("25_xt71w")
stream_5/stream = ExtResource("26_ok33r")
stream_6/stream = ExtResource("27_hejqc")
stream_7/stream = ExtResource("30_8luhx")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_nmppe"]
render_priority = 0
shader = ExtResource("21_s0vn4")
shader_parameter/texture_albedo = ExtResource("22_c1jio")
shader_parameter/lit_color = Color(1, 1, 1, 1)
shader_parameter/normal_mapping = 0
shader_parameter/normal_uv_scale = Vector2(1, 1)
shader_parameter/normal_uv_offset = Vector2(0, 0)
shader_parameter/normal_scale = 1.0
shader_parameter/shadow_color = Color(1, 1, 1, 1)
shader_parameter/use_gradient = false
shader_parameter/use_inverse_gradient = false
shader_parameter/color_depth = 16.0000007125
shader_parameter/roughness_scale = 1.0
shader_parameter/use_transparency = true
shader_parameter/alpha_threshold = 0.5
shader_parameter/cull_mode = 2
shader_parameter/use_dithered_transparency = false
shader_parameter/opacity = 1.0
shader_parameter/billboard_mode = 1
shader_parameter/no_outlines = false
shader_parameter/dither_type = 0
shader_parameter/dither_mode = 0
shader_parameter/dither_pixel_size = 2.0000000475
shader_parameter/dither_density = 256.0
shader_parameter/world_dither_density = 32.0
shader_parameter/dither_spread = 2.0
shader_parameter/shadow_bias = 0.1320000537699999
shader_parameter/albedo_mapping = 0
shader_parameter/uv_scale = Vector2(1, 1)
shader_parameter/uv_offset = Vector2(0, 0)
shader_parameter/global_ambient = Color(0, 0.014809188, 0.015851432, 1)
shader_parameter/light_boost = 1.0
shader_parameter/bounce_strength = 0.0

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_0xprk"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_0ix62"]
render_priority = 0
shader = ExtResource("21_s0vn4")
shader_parameter/lit_color = Color(0, 0, 0, 1)
shader_parameter/normal_mapping = 0
shader_parameter/normal_uv_scale = Vector2(1, 1)
shader_parameter/normal_uv_offset = Vector2(0, 0)
shader_parameter/normal_scale = 1.0
shader_parameter/shadow_color = Color(0, 0, 0, 1)
shader_parameter/use_gradient = false
shader_parameter/use_inverse_gradient = false
shader_parameter/color_depth = 16.0000007125
shader_parameter/roughness_scale = 1.0
shader_parameter/use_transparency = false
shader_parameter/alpha_threshold = 0.5
shader_parameter/cull_mode = 2
shader_parameter/use_dithered_transparency = false
shader_parameter/opacity = 1.0
shader_parameter/billboard_mode = 0
shader_parameter/no_outlines = false
shader_parameter/dither_type = 0
shader_parameter/dither_mode = 0
shader_parameter/dither_pixel_size = 2.0000000475
shader_parameter/dither_density = 256.0
shader_parameter/world_dither_density = 32.0
shader_parameter/dither_spread = 2.0
shader_parameter/shadow_bias = 0.1320000537699999
shader_parameter/albedo_mapping = 0
shader_parameter/uv_scale = Vector2(1, 1)
shader_parameter/uv_offset = Vector2(0, 0)
shader_parameter/global_ambient = Color(0, 0.014809188, 0.015851432, 1)
shader_parameter/light_boost = 1.0
shader_parameter/bounce_strength = 0.0

[sub_resource type="CapsuleMesh" id="CapsuleMesh_0ix62"]

[sub_resource type="SphereShape3D" id="SphereShape3D_0ix62"]
radius = 15.0

[sub_resource type="SphereShape3D" id="SphereShape3D_8luhx"]
radius = 5.0

[node name="monster" type="CharacterBody3D" unique_id=832945777 node_paths=PackedStringArray("monster_steps", "purr_player", "growl_player", "breathing_player", "groan_player", "step_timer", "search_timer", "scream_timer", "wander_timer", "nav_agent")]
collision_layer = 3
script = ExtResource("1_0ix62")
monster_steps = NodePath("steps")
purr_player = NodePath("purrs")
growl_player = NodePath("growls")
breathing_player = NodePath("breathing")
groan_player = NodePath("groans")
step_timer = NodePath("logic/steps_timer")
search_timer = NodePath("logic/search_timer")
scream_timer = NodePath("logic/scream_timer")
wander_timer = NodePath("logic/wander_timer")
nav_agent = NodePath("NavigationAgent3D")

[node name="logic" type="Node" parent="." unique_id=92862137]

[node name="statemachine" type="Node" parent="logic" unique_id=901969623 node_paths=PackedStringArray("initial_state")]
script = ExtResource("1_jlss8")
initial_state = NodePath("wander")

[node name="wander" type="Node" parent="logic/statemachine" unique_id=224507659 node_paths=PackedStringArray("monster")]
script = ExtResource("2_gdl1p")
monster = NodePath("../../..")

[node name="search" type="Node" parent="logic/statemachine" unique_id=1996475802 node_paths=PackedStringArray("monster")]
script = ExtResource("3_0xprk")
monster = NodePath("../../..")

[node name="attack" type="Node" parent="logic/statemachine" unique_id=298553455]

[node name="scream_timer" type="Timer" parent="logic" unique_id=1549204285]
wait_time = 30.0
autostart = true

[node name="steps_timer" type="Timer" parent="logic" unique_id=1877996004]
wait_time = 1.5
autostart = true

[node name="search_timer" type="Timer" parent="logic" unique_id=1490241218]
wait_time = 10.0

[node name="wander_timer" type="Timer" parent="logic" unique_id=261145330]
wait_time = 30.0
autostart = true

[node name="steps" type="AudioStreamPlayer3D" parent="." unique_id=53316577]
stream = SubResource("AudioStreamRandomizer_yce20")
volume_db = -20.0
max_db = -20.0
pitch_scale = 0.5
max_polyphony = 4

[node name="growls" type="AudioStreamPlayer3D" parent="." unique_id=928213485]
stream = SubResource("AudioStreamRandomizer_6h0bv")
bus = &"growls"

[node name="purrs" type="AudioStreamPlayer3D" parent="." unique_id=1326645981]
stream = SubResource("AudioStreamRandomizer_1v1i4")
bus = &"purrs"

[node name="breathing" type="AudioStreamPlayer3D" parent="." unique_id=789695833]
stream = ExtResource("20_opw4d")
bus = &"breathing"

[node name="groans" type="AudioStreamPlayer3D" parent="." unique_id=402786154]
stream = SubResource("AudioStreamRandomizer_tk6rn")
pitch_scale = 2.0
bus = &"groans"

[node name="eyes" type="Sprite3D" parent="." unique_id=688820396]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.48828888, 0.6295322)
material_override = SubResource("ShaderMaterial_nmppe")
texture = ExtResource("22_c1jio")

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="." unique_id=2063737106]
path_desired_distance = 5.0
target_desired_distance = 15.0
path_max_distance = 12.31
avoidance_enabled = true
use_3d_avoidance = true
avoidance_layers = 3

[node name="CollisionShape3D" type="CollisionShape3D" parent="." unique_id=2000773784]
shape = SubResource("CapsuleShape3D_0xprk")

[node name="MeshInstance3D" type="MeshInstance3D" parent="." unique_id=347732696]
material_override = SubResource("ShaderMaterial_0ix62")
mesh = SubResource("CapsuleMesh_0ix62")

[node name="large_hearing_radius" type="Area3D" parent="." unique_id=1980168848]
collision_layer = 4
collision_mask = 4
monitorable = false

[node name="CollisionShape3D" type="CollisionShape3D" parent="large_hearing_radius" unique_id=297386381]
shape = SubResource("SphereShape3D_0ix62")

[node name="hearing_radius" type="Area3D" parent="." unique_id=1451825290]
collision_layer = 4
collision_mask = 4
monitorable = false

[node name="CollisionShape3D" type="CollisionShape3D" parent="hearing_radius" unique_id=8737666]
shape = SubResource("SphereShape3D_8luhx")

[node name="SpotLight3D" type="SpotLight3D" parent="." unique_id=46828439]
transform = Transform3D(1, 0, 0, 0, -1, -8.742278e-08, 0, 8.742278e-08, -1, 0, 0.44544876, 0.23956192)
